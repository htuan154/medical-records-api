{
  "total_rows": 2,
  "offset": 0,
  "rows": [
    {
      "id": "_design/_design/treatments",
      "key": "_design/_design/treatments",
      "value": {
        "rev": "3-e0a32a7c22a8819bd6b99ac51ba6a900"
      },
      "doc": {
        "_id": "_design/_design/treatments",
        "_rev": "3-e0a32a7c22a8819bd6b99ac51ba6a900",
        "views": {
          "by_patient": {
            "map": "function (doc) {\r\n  if (doc.type === 'treatment') {\r\n    emit(doc.patient_id, {\r\n      id: doc._id,\r\n      treatment_name: doc.treatment_info.treatment_name,\r\n      start_date: doc.treatment_info.start_date,\r\n      end_date: doc.treatment_info.end_date,\r\n      status: doc.status\r\n    });\r\n  }\r\n}\r\n"
          },
          "active_treatments": {
            "map": "function (doc) {\r\n  if (doc.type === 'treatment' && doc.status === 'active') {\r\n    emit(doc.patient_id, {\r\n      id: doc._id,\r\n      treatment_name: doc.treatment_info.treatment_name,\r\n      start_date: doc.treatment_info.start_date,\r\n      end_date: doc.treatment_info.end_date\r\n    });\r\n  }\r\n}\r\n"
          },
          "by_medication": {
            "map": "function (doc) {\r\n  if (doc.type === 'treatment' && doc.medications) {\r\n    doc.medications.forEach(function(med) {\r\n      emit(med.medication_id, {\r\n        id: doc._id,\r\n        patient_id: doc.patient_id,\r\n        medication_name: med.name,\r\n        dosage: med.dosage,\r\n        frequency: med.frequency\r\n      });\r\n    });\r\n  }\r\n}\r\n"
          }
        },
        "language": "javascript"
      }
    },
    {
      "id": "treatment_2024_001",
      "key": "treatment_2024_001",
      "value": {
        "rev": "1-809fb6dde4307a6049b6402c7e772198"
      },
      "doc": {
        "_id": "treatment_2024_001",
        "_rev": "1-809fb6dde4307a6049b6402c7e772198",
        "type": "treatment",
        "patient_id": "patient_2024_001",
        "doctor_id": "doctor_2024_001",
        "medical_record_id": "record_2024_001",
        "treatment_info": {
          "treatment_name": "Điều trị tăng huyết áp",
          "start_date": "2024-01-20T00:00:00Z",
          "end_date": "2024-02-20T00:00:00Z",
          "duration_days": 31,
          "treatment_type": "medication"
        },
        "medications": [
          {
            "medication_id": "med_amlodipine_5mg",
            "name": "Amlodipine",
            "dosage": "5mg",
            "frequency": "1 lần/ngày",
            "route": "oral",
            "instructions": "Uống sau ăn sáng",
            "quantity_prescribed": 30
          }
        ],
        "monitoring": {
          "parameters": [
            "blood_pressure",
            "heart_rate"
          ],
          "frequency": "weekly",
          "next_check": "2024-01-27T00:00:00Z"
        },
        "status": "active",
        "created_at": "2024-01-20T10:45:00Z",
        "updated_at": "2024-01-20T10:45:00Z"
      }
    }
  ]
}