{
  "docs": [
    {
      "_id": "_design/_design/users",
      "views": {
        "users_by_link": {
          "map": "function (doc) {\r\n  if (doc.type === 'user') {\r\n    // Nếu là user liên kết với bệnh nhân\r\n    if (doc.linked_patient_id) {\r\n      emit(['patient', doc.linked_patient_id], doc._id);\r\n    }\r\n    // Nếu là user liên kết với bác sĩ\r\n    if (doc.linked_doctor_id) {\r\n      emit(['doctor', doc.linked_doctor_id], doc._id);\r\n    }\r\n  }\r\n}\r\n"
        },
        "by_staff": {
          "map": "function (doc) {\r\n  if (doc.type === 'user' && doc.linked_staff_id) {\r\n    emit(doc.linked_staff_id, doc._id);\r\n  }\r\n}\r\n"
        },
        "by_username": {
          "map": "function (doc) {\r\n  if (doc.type === 'user') {\r\n    emit(\r\n      doc.username,\r\n      {\r\n        id: doc._id,\r\n        roles: doc.role_names,\r\n        account_type: doc.account_type,\r\n        staff_id: doc.linked_staff_id\r\n      }\r\n    );\r\n  }\r\n}\r\n"
        }
      },
      "language": "javascript"
    },
    {
      "_id": "_design/users",
      "language": "javascript",
      "views": {
        "by_username": {
          "map": "function (doc) {\n  if (doc.type === 'user' && doc.username) {\n    emit(doc.username.toLowerCase(), null);\n  }\n}"
        },
        "by_staff": {
          "map": "function (doc) {\n  if (doc.type === 'user' && doc.account_type === 'staff' && doc.linked_staff_id) {\n    emit(doc.linked_staff_id, null);\n  }\n}"
        },
        "by_patient": {
          "map": "function (doc) {\n  if (doc.type === 'user' && doc.account_type === 'patient' && doc.linked_patient_id) {\n    emit(doc.linked_patient_id, null);\n  }\n}"
        },
        "all": {
          "map": "function (doc) {\n  if (doc.type === 'user') emit(doc._id, null);\n}"
        }
      }
    },
    {
      "_id": "user_admin_001",
      "type": "user",
      "username": "admin",
      "email": "admin@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "admin"
      ],
      "account_type": "staff",
      "linked_staff_id": "staff_2025_admin",
      "status": "active",
      "created_at": "2025-08-19T10:00:00Z",
      "updated_at": "2025-08-19T10:00:00Z"
    },
    {
      "_id": "user_doctor_001",
      "type": "user",
      "username": "dr.binh",
      "email": "bs.tranthibinh@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "doctor"
      ],
      "account_type": "doctor",
      "linked_doctor_id": "doctor_2025_001",
      "status": "active"
    },
    {
      "_id": "user_nurse_hoa",
      "type": "user",
      "username": "nurse.hoa",
      "email": "hoa.nurse@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "nurse"
      ],
      "account_type": "staff",
      "linked_staff_id": "staff_2025_001",
      "status": "active",
      "created_at": "2025-08-19T10:00:00Z",
      "updated_at": "2025-08-19T10:00:00Z"
    },
    {
      "_id": "user_patient_001",
      "type": "user",
      "username": "patient.an",
      "email": "an@email.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_001",
      "status": "active",
      "created_at": "2025-08-19T10:00:00Z",
      "updated_at": "2025-08-19T10:00:00Z"
    },
    {
      "_id": "user_rec_anh",
      "type": "user",
      "username": "rec.anh",
      "email": "anh.rec@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "receptionist"
      ],
      "account_type": "staff",
      "linked_staff_id": "staff_2025_002",
      "status": "active",
      "created_at": "2025-08-19T10:00:00Z",
      "updated_at": "2025-08-19T10:00:00Z"
    },
    {
      "_id": "user_dr_2025_002",
      "type": "user",
      "username": "dr.2025_002",
      "email": "dr2025_002@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "doctor"
      ],
      "account_type": "doctor",
      "linked_doctor_id": "doctor_2025_002",
      "status": "active"
    },
    {
      "_id": "user_dr_2025_003",
      "type": "user",
      "username": "dr.2025_003",
      "email": "dr2025_003@clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "doctor"
      ],
      "account_type": "doctor",
      "linked_doctor_id": "doctor_2025_003",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_002",
      "type": "user",
      "username": "patient.2025_002",
      "email": "patient2025_002@example.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_002",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_003",
      "type": "user",
      "username": "patient.2025_003",
      "email": "patient2025_003@example.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_003",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_004",
      "type": "user",
      "username": "patient.2025_004",
      "email": "patient2025_004@example.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_004",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_005",
      "type": "user",
      "username": "patient.2025_005",
      "email": "patient2025_005@example.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_005",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_006",
      "type": "user",
      "username": "patient.2025_006",
      "email": "patient2025_006@example.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_006",
      "status": "active"
    },
    {
      "_id": "user_patient_2025_11_001",
      "type": "user",
      "username": "patient.2025_11_001",
      "email": "patient001@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_001",
      "status": "active",
      "created_at": "2025-11-02T08:00:00Z",
      "updated_at": "2025-11-02T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_002",
      "type": "user",
      "username": "patient.2025_11_002",
      "email": "patient002@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_002",
      "status": "active",
      "created_at": "2025-11-03T08:00:00Z",
      "updated_at": "2025-11-03T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_003",
      "type": "user",
      "username": "patient.2025_11_003",
      "email": "patient003@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_003",
      "status": "active",
      "created_at": "2025-11-04T08:00:00Z",
      "updated_at": "2025-11-04T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_004",
      "type": "user",
      "username": "patient.2025_11_004",
      "email": "patient004@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_004",
      "status": "active",
      "created_at": "2025-11-05T08:00:00Z",
      "updated_at": "2025-11-05T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_005",
      "type": "user",
      "username": "patient.2025_11_005",
      "email": "patient005@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_005",
      "status": "active",
      "created_at": "2025-11-06T08:00:00Z",
      "updated_at": "2025-11-06T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_006",
      "type": "user",
      "username": "patient.2025_11_006",
      "email": "patient006@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_006",
      "status": "active",
      "created_at": "2025-11-07T08:00:00Z",
      "updated_at": "2025-11-07T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_007",
      "type": "user",
      "username": "patient.2025_11_007",
      "email": "patient007@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_007",
      "status": "active",
      "created_at": "2025-11-08T08:00:00Z",
      "updated_at": "2025-11-08T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_008",
      "type": "user",
      "username": "patient.2025_11_008",
      "email": "patient008@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_008",
      "status": "active",
      "created_at": "2025-11-09T08:00:00Z",
      "updated_at": "2025-11-09T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_009",
      "type": "user",
      "username": "patient.2025_11_009",
      "email": "patient009@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_009",
      "status": "active",
      "created_at": "2025-11-10T08:00:00Z",
      "updated_at": "2025-11-10T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_010",
      "type": "user",
      "username": "patient.2025_11_010",
      "email": "patient010@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_010",
      "status": "active",
      "created_at": "2025-11-11T08:00:00Z",
      "updated_at": "2025-11-11T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_011",
      "type": "user",
      "username": "patient.2025_11_011",
      "email": "patient011@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_011",
      "status": "active",
      "created_at": "2025-11-12T08:00:00Z",
      "updated_at": "2025-11-12T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_012",
      "type": "user",
      "username": "patient.2025_11_012",
      "email": "patient012@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_012",
      "status": "active",
      "created_at": "2025-11-13T08:00:00Z",
      "updated_at": "2025-11-13T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_013",
      "type": "user",
      "username": "patient.2025_11_013",
      "email": "patient013@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_013",
      "status": "active",
      "created_at": "2025-11-14T08:00:00Z",
      "updated_at": "2025-11-14T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_014",
      "type": "user",
      "username": "patient.2025_11_014",
      "email": "patient014@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_014",
      "status": "active",
      "created_at": "2025-11-15T08:00:00Z",
      "updated_at": "2025-11-15T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_015",
      "type": "user",
      "username": "patient.2025_11_015",
      "email": "patient015@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_015",
      "status": "active",
      "created_at": "2025-11-16T08:00:00Z",
      "updated_at": "2025-11-16T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_016",
      "type": "user",
      "username": "patient.2025_11_016",
      "email": "patient016@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_016",
      "status": "active",
      "created_at": "2025-11-17T08:00:00Z",
      "updated_at": "2025-11-17T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_017",
      "type": "user",
      "username": "patient.2025_11_017",
      "email": "patient017@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_017",
      "status": "active",
      "created_at": "2025-11-18T08:00:00Z",
      "updated_at": "2025-11-18T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_018",
      "type": "user",
      "username": "patient.2025_11_018",
      "email": "patient018@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_018",
      "status": "active",
      "created_at": "2025-11-19T08:00:00Z",
      "updated_at": "2025-11-19T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_019",
      "type": "user",
      "username": "patient.2025_11_019",
      "email": "patient019@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_019",
      "status": "active",
      "created_at": "2025-11-20T08:00:00Z",
      "updated_at": "2025-11-20T08:30:00Z"
    },
    {
      "_id": "user_patient_2025_11_020",
      "type": "user",
      "username": "patient.2025_11_020",
      "email": "patient020@demo-clinic.com",
      "password_hash": "$2a$12$N1GocFct6mkIJSWWU4M5sOQVYnI6lortWck28EfrLJ58euANVuHDq",
      "role_names": [
        "patient"
      ],
      "account_type": "patient",
      "linked_patient_id": "patient_2025_11_020",
      "status": "active",
      "created_at": "2025-11-21T08:00:00Z",
      "updated_at": "2025-11-21T08:30:00Z"
    }
  ]
}