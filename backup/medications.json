{
  "total_rows": 2,
  "offset": 0,
  "rows": [
    {
      "id": "_design/_design/medications",
      "key": "_design/_design/medications",
      "value": {
        "rev": "4-8152db0f2c140e5bd0bd0a404238bb2a"
      },
      "doc": {
        "_id": "_design/_design/medications",
        "_rev": "4-8152db0f2c140e5bd0bd0a404238bb2a",
        "views": {
          "by_name": {
            "map": "function (doc) {\r\n  if (doc.type === 'medication') {\r\n    emit(doc.medication_info.name.toLowerCase(), {\r\n      id: doc._id,\r\n      name: doc.medication_info.name,\r\n      strength: doc.medication_info.strength,\r\n      current_stock: doc.inventory.current_stock,\r\n      status: doc.status\r\n    });\r\n  }\r\n}\r\n"
          },
          "by_therapeutic_class": {
            "map": "function (doc) {\r\n  if (doc.type === 'medication') {\r\n    emit(doc.clinical_info.therapeutic_class, {\r\n      id: doc._id,\r\n      name: doc.medication_info.name,\r\n      strength: doc.medication_info.strength,\r\n      current_stock: doc.inventory.current_stock\r\n    });\r\n  }\r\n}\r\n"
          },
          "low_stock": {
            "map": "function (doc) {\r\n  if (doc.type === 'medication' && doc.inventory.current_stock < 100) {\r\n    emit(doc.inventory.current_stock, {\r\n      id: doc._id,\r\n      name: doc.medication_info.name,\r\n      current_stock: doc.inventory.current_stock,\r\n      supplier: doc.inventory.supplier\r\n    });\r\n  }\r\n}\r\n"
          },
          "expiring_soon": {
            "map": "function (doc) {\r\n  if (doc.type === 'medication') {\r\n    var expiryDate = new Date(doc.inventory.expiry_date);\r\n    var threeMonthsFromNow = new Date();\r\n    threeMonthsFromNow.setMonth(threeMonthsFromNow.getMonth() + 3);\r\n    if (expiryDate <= threeMonthsFromNow) {\r\n      emit(doc.inventory.expiry_date, {\r\n        id: doc._id,\r\n        name: doc.medication_info.name,\r\n        expiry_date: doc.inventory.expiry_date,\r\n        current_stock: doc.inventory.current_stock\r\n      });\r\n    }\r\n  }\r\n}\r\n"
          }
        },
        "language": "javascript"
      }
    },
    {
      "id": "med_amlodipine_5mg",
      "key": "med_amlodipine_5mg",
      "value": {
        "rev": "1-9dd51d08ef53116718b125d613fd4202"
      },
      "doc": {
        "_id": "med_amlodipine_5mg",
        "_rev": "1-9dd51d08ef53116718b125d613fd4202",
        "type": "medication",
        "medication_info": {
          "name": "Amlodipine",
          "generic_name": "Amlodipine besylate",
          "strength": "5mg",
          "dosage_form": "tablet",
          "manufacturer": "Pharmaco",
          "barcode": "8936001234567"
        },
        "clinical_info": {
          "therapeutic_class": "Calcium channel blocker",
          "indications": [
            "Hypertension",
            "Angina pectoris"
          ],
          "contraindications": [
            "Hypersensitivity to amlodipine"
          ],
          "side_effects": [
            "Ankle edema",
            "Dizziness",
            "Flushing"
          ],
          "drug_interactions": [
            "Grapefruit juice",
            "Simvastatin"
          ]
        },
        "inventory": {
          "current_stock": 500,
          "unit_cost": 1200,
          "expiry_date": "2025-12-31",
          "supplier": "Medical Supply Co."
        },
        "status": "active",
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-15T10:00:00Z"
      }
    }
  ]
}